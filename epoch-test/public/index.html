<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Epoch demo</title>
    <script src="js/jquery.min.js"></script>
    <script src="js/d3.min.js"></script>
    <script src="js/epoch.0.5.2.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/epoch.0.5.2.min.css">
    <script type='text/javascript'>

      function getNewData(chart) {
        $.getJSON('/random_area', function(d) {
          chart.push(d);
        });
      }

      function getGaugeData(chart) {
        $.getJSON('/random_gauge', function(d) {
          chart.push(d);
        });
      }

      $(document).ready(function() {
        $.getJSON('/initial_data', function(d) {
          var areaChartInstance = $('#area').epoch({ type: 'time.area', data: d});
          var lineChartInstance = $('#line').epoch({ type: 'time.line', data: d});
          var barChartInstance = $('#bar').epoch({ type: 'time.bar', data: d});

          var gauge = $("#gauge").epoch({type: 'time.gauge', value: 0.5});

          setInterval(function() {getNewData(areaChartInstance)},1000);
          setInterval(function() {getNewData(lineChartInstance)},1000);
          setInterval(function() {getNewData(barChartInstance)},1000);
          setInterval(function() {getGaugeData(gauge)},1000);
        });
      });
                  
    </script>
  </head>
  <body>
    <h1>Here's a real-time area graph.</h1>
    <div id="area" class="epoch category10" style="height: 200px;"></div>

    <h1>Here's a real-time line graph.</h1>
    <div id="line" class="epoch category10" style="height: 200px;"></div>

    <h1>Here's a real-time bar graph.</h1>
    <div id="bar" class="epoch category10" style="height: 200px;"></div>

    <h1>And here's a gauge</h1>
    <div id="gauge" class="epoch gauge-small"></div>
  </body>
</html>
