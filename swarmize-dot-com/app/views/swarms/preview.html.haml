%h1 Previewing #{@swarm.name}

%ul.nav.nav-tabs.swarmbuilder-nav.nav-justified
  %li= link_to "Swarm Details", edit_swarm_path(@swarm)
  %li= link_to "Swarm Fields", fields_swarm_path(@swarm)
  %li.active= link_to "Preview Swarm", preview_swarm_path(@swarm)
  %li= link_to "Commission Swarm", '#'

.embeddable-swarm
  = form_tag '#' do
    - if @swarm.fields
      - @swarm.fields.each do |field|
        - if FieldDescription.has_custom_display?(Field.from_hash(field).field_type)
          = render "form_partials/#{Field.from_hash(field).field_type}_display_field_partial", field: Field.from_hash(field), field_description: FieldDescription.find(Field.from_hash(field).field_type)
        - else
          = render "form_partials/display_field_partial", field: Field.from_hash(field), field_description: FieldDescription.find(Field.from_hash(field).field_type)
      %p
        = submit_tag "Submit", :class => "btn btn-default"

%p
  = link_to "Alter fields", fields_swarm_path(@swarm)
  |
  = link_to "Back to swarms", swarms_path
